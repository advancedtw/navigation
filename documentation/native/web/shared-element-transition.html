<html>
<head>
    <title>Shared Element Transition</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="../../../css/prism.css">
    <link rel="stylesheet" href="../../../css/navigation.css">
    <style>
        :root {
            --primary-color: #9cc3d5ff;
            --secondary-color: #0063b2ff;
        }
    </style>
</head>

<body>
    <div id="banner">
        <a href="../../../native"><img alt="logo" src="../../../img/logo.png" /></a>
        <a href="../../setup.html">React</a>
        <a href="https://github.com/grahammendick/navigation">GitHub</a>
    </div>
    <div id="content">
        <div id="menu">
            <h2>
                <img alt="native" src="../../../img/native.png" />
                React Native
            </h2>
            <div id="items">
                <a href="../setup.html">Setup</a>
                <a href="../hello-world.html">Hello World</a>
                <a href="../push-navigation.html">Push Navigation</a>
                <a href="../pop-navigation.html">Pop Navigation</a>
                <a href="../navigation-bar.html">Navigation Bar</a>
                <a href="../tab-bar.html">Tab Bar</a>
                <a href="../modal.html">Modal</a>
                <a href="../drawer.html">Drawer</a>
                <a href="../bottom-sheet.html">Bottom Sheet</a>
                <a href="../floating-action-button.html">Floating Action Button (Android)</a>
                <a href="../scene-navigation-lifecycle.html">Navigation Lifecycle</a>
                <a href="../custom-animation.html">Custom Animation (Android)</a>
                <a href="../shared-element-transition.html">Shared Element Transition (Android)</a>
                <a href="../deep-links.html">Deep Links</a>
                <a href="../typescript.html">TypeScript</a>
                <a href="../examples.html">Examples</a>
                <h3>Web</h3>
                <a href="setup.html">Setup</a>
                <a href="browser-history.html">Browser History</a>
                <a href="hyperlinks.html">Hyperlinks</a>
                <a href="custom-animation.html">Custom Animation</a>
                <a href="shared-element-transition.html" class="selected">Shared Element Transition</a>
                <a href="examples.html">Examples</a>
            </div>
        </div>
        <div id="article">
            <h1>Shared Element Transition</h1>
            <p>
                On Android, our example email app has <a href="../shared-element-transition.html">a shared element transition</a> that runs when a user opens a mail. The title of the email smoothly animates from the 'inbox' scene to the 'mail' scene. We want that same shared element transition to run on the web, too. We've already wrapped the subject elements in <code>SharedElement</code> components. On the web, each <code>SharedElement</code> needs a <code>data prop</code>. It holds the subject line and font size so that we can scale the text during the scene navigation.
            </p>
            <pre><code class="language-jsx">// The 'inbox' scene
&lt;SharedElement
  data={{size: 14, subject: subject}}
  name={'email' + id}>
  &lt;Text>{subject}&lt;/Text>
&lt;/SharedElement></code></pre>
            <pre><code class="language-jsx">// The 'mail' scene
&lt;SharedElement
  data={{size: 20, subject: subject}}
  name={'email' + id}>
  &lt;Text>{subject}&lt;/Text>
&lt;/SharedElement></code></pre>
            <h2>Animating</h2>
            <p>
                During a navigation, the <code>NavigationStack.SharedElementTransition </code> component keeps track of the shared element between the two scenes. As the navigation progresses, it interpolates between the source and target element screen positions. It calls you back with a <code>style</code> parameter containing these interpolated values so you can animate the shared element. The <code>SharedElementTransition </code> component also accepts <code>onAnimating</code> and <code>onAnimated props</code> so you can style the source and target elements when the navigation starts and finishes.
            </p>
            <p>
                Returning to the email example, we create a <code>MailShared</code> component that renders a <code>SharedElementTransition</code> component. Inside the child callback function we render the email subject inside a div. We style the div using the interpolated coordinates. To make it look like the subject is moving out of the 'inbox' scene and into the 'mail' scene, we supply an <code>onAnimating prop</code> that hides the subject on these scenes when the navigation begins. An <code>onAnimated prop</code> restores their visibility when the navigation completes.
            </p>
            <pre><code class="language-jsx">const MailShared = (props) => (
  &lt;NavigationStack.SharedElementTransition
    onAnimating={(name, ref) => {ref.style.opacity = 0}}
    onAnimated={(name, ref) => {ref.style.opacity = 1}}
    {...props}>
    {(style, name, data) => (
      &lt;Text
        key={name}
        style={{
          position: 'absolute',
          fontSize: `${data.size}px`,
          left: data.left,
          top: data.top,
          width: data.width,
          height: data.height,
          transformOrigin: 'top left',
          transform: `
            translate(${style.left - data.left}px, ${style.top - data.top}px)
            scale(${style.width / data.width}, ${style.height / data.height})
          `
        }}>
        {data.subject}
      &lt;/Text>
    )}
  &lt;/NavigationStack.SharedElementTransition>
);</code></pre>
        <p>
            We assign our <code>MailShared</code> component to the <code>sharedElementTransition prop</code> of the <code>NavigationStack</code> component because the shared element transition has to run as part of the overall scene animation.
        </p>
        <pre><code class="language-jsx">&lt;NavigationStack
  sharedElementTransition={props => &lt;MailShared {...props} />}
  ...</code></pre>
        </div>
    </div>
    <script type="text/javascript" src="../../../js/prism.js"></script>
</body>

</html>